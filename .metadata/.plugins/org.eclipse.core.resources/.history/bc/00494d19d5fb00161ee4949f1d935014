package matrices;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Arrays;
import java.text.DecimalFormat;

public class pruebas {
	public static void main(String[] args) {
		try {

			BufferedReader buffer = new BufferedReader(new InputStreamReader(System.in));
			int opt=0;
			double opt4=0;
			int sel=0;
			int pass=0;
			int ocho=0;
			int [][] avengers = new int[4][5];
			ArrayList<String> nombres = new ArrayList<String>();
			nombres.add("Capitán América");
			nombres.add("Iron Man");
			nombres.add("Viuda Negra");
			nombres.add("Thor");
			ArrayList<String> habilidades = new ArrayList<String>();
			habilidades.add("Fuerza");
			habilidades.add("Inteligencia");
			habilidades.add("Velocidad");
			habilidades.add("Intuición");
			habilidades.add("Inmortalidad");
			double puntos=0;
			double []puntosTodos = new double [4];
			double[] operacion= {0.3, 0.3, 0.2, 0.1, 0.1};
			double[][] ranked = new double[4][2];
			DecimalFormat df = new DecimalFormat("0"); //esto es para decir cuantos decimales quiero, en este caso, ninguno. Va junto a el syso de abajo
			//System.out.println(df.format(nombreVariableDouble));
			DecimalFormat df2 = new DecimalFormat("0.03");//En este caso, 2 decimales
			double mision=0;
			double puntostotales=0;
			double puntostotales2=0;
			double[] puntajedesc=new double [4];
			String[] nombredesc=new String [4];
			int cont=1;
			
			while (opt!=5){
				
				System.out.println();
				System.out.println("Pulsa el número correspondiente para seleccionar la opción:");
				System.out.println("===============================================================");
				System.out.println("1. Registrar datos aleatorios");
				System.out.println("2. Evaluar el más superhéroe");
				System.out.println("3. Analizar misiones");
				System.out.println("4. Reponer habilidades");
				System.out.println("5. Salir");
				System.out.println();
				opt= Integer.parseInt(buffer.readLine());
				
				if (opt==5) System.out.println("El mundo sigue a salvo con nosotros, aunque seamos menos");
				
				if (opt>5 || opt<=0) {
					System.out.println("Error. Opción no válida");
					System.out.println();
				}
				
				if (opt==1){
					while (pass!=1234){
						System.out.println("Introduce la contraseña supersecreta:");
						pass= Integer.parseInt(buffer.readLine());
					}
					
					for (int x=0;x<avengers.length;x++){
						System.out.println(nombres.get(x)+":"); //esto se utiliza para los arraylist NO sirve para los array normales
						for (int j = 0; j < avengers[x].length; j++) {
							avengers [x][j] = (int) (Math.random()*10);
							//System.out.print ("En la posición " + x + " " + j + " has introducido " + avengers[x][j]);
						  
							System.out.println(habilidades.get(j)+": " + avengers[x][j]);
						} 
						  
						System.out.println ("");
					}
					pass=0;
				}
				
				if (opt==2){
					//esto se podría hacer arriba, en el mismo bucle, pero mejor así para entenderlo más adelante
					for (int x=0;x<avengers.length;x++){
						for (int j = 0; j < avengers[x].length; j++) {
							//System.out.print ("En la posición " + x + " " + j + " has introducido " + avengers[x][j]);
							/*System.out.println("PUNTOS: "+puntos); --- ESTO Y LO DE ABAJO ES SÓLO para comprobar la operación.
							System.out.println("OPERACION: "+avengers[x][j]+" x "+ operacion[j]+ " = " +avengers[x][j]*operacion[j] );*/
							puntos=puntos+(avengers[x][j]*operacion[j]);
							//System.out.println("PUNTOS A COMPROBAR: "+puntos);
							puntosTodos[x]=0;//por si vuelves a ejecutar que no vaya sumando puntos infinito
						} 
						puntosTodos[x]=puntos;
						puntos=0;
					}
					//-----------------------------------con esto hago ranking!---------------------------------------------------------------
					
					for(int i=0; i < puntosTodos.length; i++)
					    ranked[i][0] = puntosTodos[i];
					Arrays.sort(puntosTodos);

					for(int i=0; i < puntosTodos.length; i++)
					    for(int n=0; n < puntosTodos.length; n++)
					        if(ranked[n][0] == puntosTodos[i] && ranked[n][1] == 0) 
					            ranked[n][1] = puntosTodos.length-i;
					//-----------------------------------------------------------------------------------------------------------------
					
					for (int i = 0; i < ranked.length; i++) {
						 System.out.print(nombres.get(i)+" ha quedado en " + df.format(ranked[i][1])+"ª posición con "+df2.format(ranked[i][0])+" puntos");
						 System.out.println();
					}					
				}
				
				if (opt==3){
					mision=0;
					puntostotales=0;
					puntostotales2=0;
					cont=1;
					System.out.println("Escribe la dificultad de la misión:");
					mision= Double.parseDouble(buffer.readLine());

					
					for(int i=0;i<4;i++){// Con esto creo un array ordenado descendente desde el array bidimensional ranked y, a la vez, creo otro con los nombres en el mismo orden
						if(ranked[i][1]==1.0){
							puntajedesc[0]=ranked[i][0];
							nombredesc[0]=nombres.get(i);
						}
						if(ranked[i][1]==2.0){
							puntajedesc[1]=ranked[i][0];
							nombredesc[1]=nombres.get(i);
						}
						if(ranked[i][1]==3.0){
							puntajedesc[2]=ranked[i][0];
							nombredesc[2]=nombres.get(i);
						}
						if(ranked[i][1]==4.0){
							puntajedesc[3]=ranked[i][0];
							nombredesc[3]=nombres.get(i);
						}
						puntostotales+=puntosTodos[i];
					}
					
					/*System.out.println("los puntos totales son----------"+puntostotales);-------PARA PRUEBAS!!
					for(int i=0;i<4;i++){
						System.out.println(nombredesc[i]+": "+puntajedesc[i]+" puntos");
						}*/ 
					System.out.println();
					if(mision>puntostotales){
						System.out.println("¡Todos a la misión! ¡Tened con cuidado!");
						for(int i=0;i<4;i++){
						System.out.println(nombredesc[i]+": "+puntajedesc[i]+" puntos");
						}
					}
					//int mision=0;
					//double puntostotales=0;																	
					if(mision<puntostotales){
						puntostotales2+=puntajedesc[0];
						while(mision>puntostotales2){							
							puntostotales2+=puntajedesc[cont];							
							cont++;
						}
						System.out.println("Los vengadores que van a ir a la misión y su puntaje son los siguientes");
						System.out.println("_______________________________________________________________________");
						for(int i=0;i<cont;i++){
							System.out.println(nombredesc[i]+": "+puntajedesc[i]+" puntos");
						}
					}					
				}
				
				if (opt == 4) {
					while (opt4 != 4.6) {
						System.out.println("4.1 Mejorar fuerza");
						System.out.println("4.2 Mejorar fuerza");
						System.out.println("4.3 Mejorar fuerza");
						System.out.println("4.4 Mejorar fuerza");
						System.out.println("4.5 Mejorar fuerza");
						System.out.println("4.6 Salir");
						System.out.println();
						opt4 = Double.parseDouble(buffer.readLine());
						if (opt4 < 4.1 || opt4 > 4.6)
							System.out.println("Error. Selecciona la opción correcta (4.1, 4.2, 4.3... o 4.6");

						if (opt4 == 4.1) {
							System.out.println("Selecciona el número que corresponde a tu superhéroe:");
							System.out.println("1. Capitán América");
							System.out.println("2. Iron Man");
							System.out.println("3. Viuda Negra");
							System.out.println("4. Thor");
							System.out.println();
							sel = Integer.parseInt(buffer.readLine());
							if (sel == 1) {
								System.out.println("El Capitán América tenía " + avengers[0][0] + " puntos fuerza");
								avengers[0][0] += 1;
								System.out.println("Ahora tiene " + avengers[0][0] + " puntos fuerza");
							}
							if (sel == 2) {
								System.out.println("Iron Man tenía " + avengers[1][0] + " puntos fuerza");
								avengers[1][0] += 1;
								System.out.println("Ahora tiene " + avengers[1][0] + " puntos fuerza");
							}
							if (sel == 3) {
								System.out.println("La Viuda Negra tenía " + avengers[2][0] + " puntos fuerza");
								avengers[2][0] += 1;
								System.out.println("Ahora tiene " + avengers[2][0] + " puntos fuerza");
							}
							if (sel == 4) {
								System.out.println("Thor tenía " + avengers[3][0] + " puntos fuerza");
								avengers[3][0] += 1;
								System.out.println("Ahora tiene " + avengers[3][0] + " puntos fuerza");
							}
						}
						
						if (opt4 == 4.2) {							
							System.out.println("Selecciona el número que corresponde a tu superhéroe:");
							System.out.println("1. Capitán América");
							System.out.println("2. Iron Man");
							System.out.println("3. Viuda Negra");
							System.out.println("4. Thor");
							System.out.println();
							sel = Integer.parseInt(buffer.readLine());
							System.out.println("Pregunta de seguridad: ¿Cúanto es 4+4?");
							ocho = Integer.parseInt(buffer.readLine());
							if (ocho == 8) {
								if (sel == 1) {
									System.out.println("El Capitán América tenía " + avengers[0][0] + " puntos fuerza");
									avengers[0][0] += 1;
									System.out.println("Ahora tiene " + avengers[0][0] + " puntos fuerza");
								}
								if (sel == 2) {
									System.out.println("Iron Man tenía " + avengers[1][0] + " puntos fuerza");
									avengers[1][0] += 1;
									System.out.println("Ahora tiene " + avengers[1][0] + " puntos fuerza");
								}
								if (sel == 3) {
									System.out.println("La Viuda Negra tenía " + avengers[2][0] + " puntos fuerza");
									avengers[2][0] += 1;
									System.out.println("Ahora tiene " + avengers[2][0] + " puntos fuerza");
								}
								if (sel == 4) {
									System.out.println("Thor tenía " + avengers[3][0] + " puntos fuerza");
									avengers[3][0] += 1;
									System.out.println("Ahora tiene " + avengers[3][0] + " puntos fuerza");
								}
							}
							if(ocho!=8)System.out.println("Te quedas con las ganas mentirosillo...");
						}
						
					}
				}
				
			}
		}
		catch (Exception e) {
			System.out.println(e);
		}
	}
}
